/*
 * build Gradle build script
 */

task prepareDocker(){
	def stageDir = file('content')
	def runtimeDir = new File(stageDir, 'runtime')
	doFirst {
		stageDir.deleteDir()
    }
    doLast {
		println "Prepare Docker build"
		stageDir.mkdirs()
	     // copy all necessary files to  build/docker/ dir
    	copy {
	        from new File("../../backend/de.jena.udp.sensinact.runtime/generated/distributions/executable/de.jena.udp.sensinact.runtime.docker.jar")
	        into stageDir
	        rename("de.jena.udp.sensinact.runtime.docker.jar", "de.jena.udp.sensinact.runtime.jar")
	    }
	    copy {
	        from new File("../../backend/de.jena.udp.sensinact.runtime/runtime/")
	        into new File(stageDir, "runtime")
	    }
    }
}

